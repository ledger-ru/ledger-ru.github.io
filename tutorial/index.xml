<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Tutorials on Личные финансы для гиков</title>
    <link>https://ledger-ru.github.io/tutorial/</link>
    <description>Recent content in Tutorials on Личные финансы для гиков</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ru</language>
    <lastBuildDate>Fri, 23 Sep 2016 14:56:11 +0300</lastBuildDate>
    <atom:link href="https://ledger-ru.github.io/tutorial/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Учебник Ledger</title>
      <link>https://ledger-ru.github.io/tutorial/</link>
      <pubDate>Fri, 23 Sep 2016 14:56:11 +0300</pubDate>
      
      <guid>https://ledger-ru.github.io/tutorial/</guid>
      <description>

&lt;p&gt;Основные моменты учета в ledger (на русском) описаны в статьях &lt;a href=&#34;http://softdroid.net/planirovanie-finansov-ledger&#34;&gt;Планирование финансов через командную стоку в ledger&lt;/a&gt; и &lt;a href=&#34;https://bronevichok.ru/blog/2014/09/27/personal-finances-with-ledger-1.html&#34;&gt;Финансовый учёт с ledger&lt;/a&gt;. Для общего развития рекомендую ознакомиться с ними.&lt;/p&gt;

&lt;h2 id=&#34;немного-теории&#34;&gt;Немного теории&lt;/h2&gt;

&lt;p&gt;Счетом мы называем любой вид Дохода/Расхода, а также любое &amp;ldquo;место&amp;rdquo;, откуда/куда приходят деньги. Кто-то называет их категориями, но суть от этого не меняется.&lt;/p&gt;

&lt;p&gt;Обычно заводят такие счета как &amp;ldquo;Продукты&amp;rdquo;, &amp;ldquo;Авто&amp;rdquo;, &amp;ldquo;Подарки&amp;rdquo;, &amp;ldquo;Зарплата&amp;rdquo;, &amp;ldquo;Наличные&amp;rdquo;, &amp;ldquo;Ипотека&amp;rdquo; и т.п.&lt;/p&gt;

&lt;p&gt;В системе двойной записи деньги переходят с одного счета на другой. И при этом отображаются в обоих строках транзакции с разными знаками.
К примеру, покупка книги за 500 рублей переводит деньги со счета &amp;ldquo;Наличные&amp;rdquo; на счет &amp;ldquo;Книги&amp;rdquo;. Получение зарплаты отражается как перевод денег со счета &amp;ldquo;Зарплата&amp;rdquo; на счет &amp;ldquo;Наличные&amp;rdquo; (ну или &amp;ldquo;Банковская карта&amp;rdquo;). Главное - помнить, что при перемещении денег в итоге должен быть обязательно ноль, иначе баланса не будет.&lt;/p&gt;

&lt;p&gt;Итак, мы выяснили, что счета могут быть самые разные, но многие пользователи добавляют такие счета верхнего уровня:&lt;/p&gt;

&lt;p&gt;• Расходы&lt;br /&gt;
• Доходы&lt;br /&gt;
• Активы&lt;br /&gt;
• Обязательства&lt;/p&gt;

&lt;p&gt;для того, чтобы в дальнейшем построить удобную структуру доходов/расходов. Счета таким образом могут выглядеть так: &amp;ldquo;Расходы&amp;rdquo; -&amp;gt; &amp;ldquo;Авто&amp;rdquo; -&amp;gt; &amp;ldquo;Бензин&amp;rdquo; и т.п. И записываются такие счета в транзакциях через двоеточие: &amp;ldquo;Расходы:Авто:Бензин&amp;rdquo;.&lt;/p&gt;

&lt;h2 id=&#34;создайте-файл-журнала&#34;&gt;Создайте файл журнала&lt;/h2&gt;

&lt;p&gt;В *nix-подобных системах вы можете создать пустой файл командой&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;touch tutorial.dat
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;В Windows просто создайте пустой файл в блокноте и сохраните файл под нужным именем, например &amp;ldquo;tutorial.dat&amp;rdquo;. Но тут есть один нюанс: т.к. ledger собран под cygwin, он требует указания имени файла с необычным путем, например, так: &amp;ldquo;/cygdrive/e/tutorial.dat&amp;rdquo; (для диска E:\)&lt;/p&gt;

&lt;p&gt;В дальнейшем запускать ledger так: &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ledger -f &amp;quot;tutorial.dat&amp;quot; &amp;lt;команда&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;или так под Windows:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;файл-для-примера&#34;&gt;Файл для примера&lt;/h2&gt;

&lt;p&gt;Я создал файл, на котором мы будем тренироваться. Скачайте его и попробуйте поработать с ним для начала:
&lt;a href=&#34;https://gist.github.com/fokusov/d226054c126566a2d4234683407c718d&#34;&gt;tutorial.dat&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Предположим, вы создали файл. Запустим основной отчет - баланс:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; balance
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Мы должны получить следующую картину:&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://ledger-ru.github.io/tutorial1.png&#34; alt=&#34;tutorial1&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Здесь мы видим, что у нас есть 1000 руб наличными и долг в 1000 руб, введенные начальными остатками. Остатки введены специально для того, чтобы показать, как начать вести журнал не с чистого листа, а переносом остатков.&lt;/p&gt;

&lt;p&gt;Попробуйте запустить отчет с фильтром:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; balance Наличные
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;так мы увидим только транзакции с наличными. Фильтры будут рассматриваться еще не раз в дальнейшем.&lt;/p&gt;

&lt;h2 id=&#34;создание-транзакций&#34;&gt;Создание транзакций&lt;/h2&gt;

&lt;p&gt;Откройте файл любимым редактором (я рекомендую Vim/Emacs или SublimeText3 с плагином подсветки/дополнения) и добавьте следующую операцию:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2016/09/01 * Зарплата
	Кошелек:Наличные		10000 руб
	Доходы:Зарплата
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Вкратце поясню что мы написали, но рекомендую ознакомиться с &lt;a href=&#34;https://ledger-ru.github.io/cheatsheet/#формат-ledger&#34;&gt;форматом записи ledger&lt;/a&gt;. У нас описана операция получения зарплаты в размере 10000 руб от 1 сентября. В ней мы зачисляем 10000 руб на счет &amp;ldquo;Кошелек:Наличные&amp;rdquo; со счета &amp;ldquo;Доходы:Зарплата&amp;rdquo;. Вы можете указать сумму с минусом в строке &amp;ldquo;Доходы:Зарплата&amp;rdquo;, но это не обязательно и важно только в транзакциях с тремя и более строками. Ledger автоматически понимает, что с другой стороны проводки нужная нам сумма. Запустите отчет баланса:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; balance
           -1000 руб  Долги:Василий
          -10000 руб  Доходы:Зарплата
           11000 руб  Кошелек:Наличные
--------------------
                   0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Ноль под чертой очень важен и показывает, что у нас все транзакции записаны правильно с точки зрения двойной записи. А остаток в кошельке у нас 11 000 руб.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Теперь вы видите насколько просто вести учет денег с ledger?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Вы спросите, почему Доходы показаны с минусом? Если кратко, то в двойной записи деньги (как и любая другая ценность) должны откуда-то переместиться куда-то. В нашем примере они пришли со статьи дохода на статью расхода. Поэтому на счете поступления показан плюсовой остаток, а на другом счете - отрицательный. Иными словами, на счете дохода их стало меньше, чем в нашем кошельке :)&lt;/p&gt;

&lt;p&gt;Введем еще одну операцию:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2016/09/05 * Бензин
	Кошелек:Наличные
	Расходы:Авто		1000 руб
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Чаще всего нужен ответ на вопрос &amp;ldquo;Сколько я трачу в месяц на &amp;hellip;?&amp;rdquo; Увидеть это можно так:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; -M register Расходы:Авто

16-Sep-01 - 16-Sep-30              Расходы:Авто                       1000 руб       1000 руб
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Добавим операцию погашения долга:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2016/09/13 * отдали долг
	Кошелек:Наличные
	Долги:Василий			1000 руб
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;и купим немного продуктов:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;2016/09/21 * продукты
	Кошелек:Наличные
	Расходы:Продукты			700 руб
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Запускаем баланс:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; balance
          -10000 руб  Доходы:Зарплата
            8300 руб  Кошелек:Наличные
            1700 руб  Расходы
            1000 руб    Авто
             700 руб    Продукты
--------------------
                   0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Выводим список транзакций:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; reg
16-Aug-31 ввод нач. остатка      Кошелек:Наличные             1000 руб      1000 руб
                                 Старт                       -1000 руб             0
16-Aug-31 ввод остатка долга     Долги:Василий               -1000 руб     -1000 руб
                                 Старт                        1000 руб             0
16-Sep-01 Зарплата               Кошелек:Наличные            10000 руб     10000 руб
                                 Доходы:Зарплата            -10000 руб             0
16-Sep-05 Бензин                 Кошелек:Наличные            -1000 руб     -1000 руб
                                 Расходы:Авто                 1000 руб             0
16-Sep-13 отдали долг            Кошелек:Наличные            -1000 руб     -1000 руб
                                 Долги:Василий                1000 руб             0
16-Sep-21 продукты               Кошелек:Наличные             -700 руб      -700 руб
                                 Расходы:Продукты              700 руб             0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;в последней колонке выводится актуальное сальдо каждой транзакции, дабы исключить ошибки.&lt;/p&gt;

&lt;p&gt;То же самое помесячно:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; reg -M
16-Aug-01 - 16-Aug-31            Долги:Василий                 -1000 руб     -1000 руб

                                 Кошелек:Наличные               1000 руб             0

16-Sep-01 - 16-Sep-30            Долги:Василий                  1000 руб      1000 руб

                                 Доходы:Зарплата              -10000 руб     -9000 руб

                                 Кошелек:Наличные               7300 руб     -1700 руб

                                 Расходы:Авто                   1000 руб      -700 руб

                                 Расходы:Продукты                700 руб             0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Транзакции определенного месяца:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; reg -b 2016/09/01 -e 2016/09/30
16-Sep-01 Зарплата               Кошелек:Наличные              10000 руб     10000 руб

                                 Доходы:Зарплата              -10000 руб             0

16-Sep-05 Бензин                 Кошелек:Наличные              -1000 руб     -1000 руб

                                 Расходы:Авто                   1000 руб             0

16-Sep-13 отдали долг            Кошелек:Наличные              -1000 руб     -1000 руб

                                 Долги:Василий                  1000 руб             0

16-Sep-21 продукты               Кошелек:Наличные               -700 руб      -700 руб

                                 Расходы:Продукты                700 руб             0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Ну и баланс еще раз:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Сколько потратил на авто:
E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; bal Расходы:Авто
            1000 руб  Расходы:Авто

# Сколько я заработал:
E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; bal ^Расходы ^Доходы --invert
           10000 руб  Доходы:Зарплата
           -1700 руб  Расходы
           -1000 руб    Авто
            -700 руб    Продукты
--------------------
            8300 руб         
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;файл-журнала&#34;&gt;Файл журнала&lt;/h2&gt;

&lt;p&gt;Файл журнала может содержать не только транзакции, но еще и другую информацию.
Рассмотрим такой файл:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;; Это главный файл журнала ledger.
; Реальные данные содержатся в файле journal.txt, а конфигурация и
; прочее хранятся в файле meta.txt.

; Вложим файл конфига
include meta.txt

; Вложим актуальный журнал
include journal.txt
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Таким образом можно разбивать файлы транзакций по валютам, счетам, а также &lt;a href=&#34;https://habrahabr.ru/post/308434/&#34;&gt;по годам для удобства&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Теперь рассмотрим файл &lt;code&gt;meta.txt&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Мы можем перечислить счета, которые возможны в наших транзакциях. Запустив ledger с ключом &lt;code&gt;--pedantic&lt;/code&gt; мы получим ошибку если в журнале будет выбран счет, не указанный в файле конфигурации:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;account Активы:Расчетный счет
account Расходы:Обеды
account Расходы:Продукты
account Доход:Зарплата
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Также можно задать валюты, которые должны быть в транзакциях:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;commodity RUR
commodity $
commodity €
commodity BTC
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;мультивалютность&#34;&gt;Мультивалютность&lt;/h2&gt;

&lt;p&gt;В ledger очень легко вести учет в разных валютах и пересчитывать их из одной в другую.&lt;/p&gt;

&lt;p&gt;Для этого необходимо вести файл с ценами/курсами (этот файл также нужен для автоматического расчета стоимости ценных бумаг), который можно сделать для автоматической загрузки из сети.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Укажем файл цен в балансе и попросим сконвертировать все данные в нужную валюту:
E:\soft\ledger\ledger.exe -f &amp;quot;/cygdrive/e/tutorial.dat&amp;quot; --price-db prices.dat bal -X USD
             USD-157  Доходы:Зарплата
              USD130  Кошелек:Наличные
               USD27  Расходы
               USD16    Авто
               USD11    Продукты
--------------------
                   0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Рассмотрим детально файл &lt;code&gt;prices.dat&lt;/code&gt; (вы можете назвать его как угодно):&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;P 2016/08/02 10:00:00 USD 65,9553 руб.
P 2016/09/01 10:00:00 USD 65,2535 руб.
P 2016/09/23 10:00:00 USD 63,7942 руб.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Как мы видим, это официальные курсы валют центробанка, структурированные для ledger.&lt;/p&gt;

&lt;h2 id=&#34;загрузка-курсов-валют&#34;&gt;Загрузка курсов валют&lt;/h2&gt;

&lt;p&gt;Для себя я использую самописную утилиту &lt;a href=&#34;https://github.com/fokusov/gopricedb&#34;&gt;gopricedb&lt;/a&gt;, которую запускаю по расписанию.
Она загружает курсы валют с сайта &lt;a href=&#34;http://fixer.io/&#34;&gt;fixer.io&lt;/a&gt; в файл нужного формата, который я указываю в строке запуска ledger как было описано выше.&lt;/p&gt;

&lt;h2 id=&#34;бюджетирование&#34;&gt;Бюджетирование&lt;/h2&gt;

&lt;p&gt;&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>